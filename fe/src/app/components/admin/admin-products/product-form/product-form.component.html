<form (submit)="save()" [formGroup]="newProductForm">
    <p>
        <mat-form-field appearance="fill">
          <mat-label>Title</mat-label>
          <input matInput placeholder="title" formControlName="title">
          <mat-error *ngIf="controls?.title?.errors?.required">
            Meg kell adni
          </mat-error>
          <mat-error *ngIf="controls?.title?.errors?.isProductTitleAlreadyExist as isProductTitleAlreadyExist">
            {{isProductTitleAlreadyExist?.message || isProductTitleAlreadyExist}}
          </mat-error>
        </mat-form-field>
    </p>
    <p>
        <mat-form-field appearance="fill">
          <mat-label>Price</mat-label>
          <span matTextPrefix>$&nbsp;</span>
          <input type="number" matInput placeholder="price" formControlName="price">
          <mat-error *ngIf="controls?.price?.errors?.required">
            Meg kell adni
          </mat-error>
          <mat-error *ngIf="controls?.price?.errors?.minNumber as minNumber">
            {{minNumber?.message || minNumber}}
          </mat-error>
          <mat-error *ngIf="controls?.price?.errors?.number as number">
            {{number?.message || number}}
          </mat-error>
        </mat-form-field>
    </p>
    <p>
        <mat-form-field appearance="fill">
          <mat-label>Category</mat-label>
          <mat-select formControlName="category">
            <mat-option value=""></mat-option>
            <mat-option *ngFor="let c of categories$ | async" [value]="c.name">{{c.displayName}}</mat-option>
          </mat-select>
          <mat-error *ngIf="controls?.category?.errors?.required">
            Meg kell adni
          </mat-error>
          <mat-error *ngIf="controls?.category?.errors?.isCategoryInProductCategories as isCategoryInProductCategories">
            {{isCategoryInProductCategories?.message || isCategoryInProductCategories}}
          </mat-error>
        </mat-form-field>
    </p>
    <p>
        <mat-form-field appearance="fill">
          <mat-label>Image URL</mat-label>
          <input matInput placeholder="image url" formControlName="imageURL">
          <mat-error *ngIf="controls?.imageURL?.errors?.required">
            Meg kell adni
          </mat-error>
          <mat-error *ngIf="controls?.imageURL?.errors?.url as url">
            {{url?.message || url}}
          </mat-error>
        </mat-form-field>
    </p>
    <p (click)="markAllInputsAsTouched()">
        <button [disabled]="newProductForm.invalid" mat-raised-button color="primary" type="submit">
            Save
        </button>
        <button [disabled]="!id" type="button" mat-raised-button color="warn" (click)="delete()">
            Delete
        </button>
    </p>
</form>
<product-card [product]="productModel" [show-actions]="false"></product-card>
